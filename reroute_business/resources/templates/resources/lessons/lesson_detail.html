{% extends "base.html" %}
{% load static %}

{% block title %}ReRoute | {{ lesson.title }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'resources/css/lesson.css' %}">
<link rel="stylesheet" href="{% static 'resources/css/lesson_layout.css' %}">

<section class="lesson-layout" id="lessonRoot"
         data-schema-url="{% url 'lesson_schema' lesson.slug %}"
         data-attempt-url="{% url 'lesson_attempt' lesson.slug %}"
         data-yt-id="{{ lesson.youtube_video_id|default_if_none:'' }}">
  <aside class="lesson-side">
    <div class="quiz-panel">
      <h2>Quiz</h2>
      <div id="lessonQuizContainer" class="lesson-quiz-container" aria-live="polite"></div>
      <div class="lesson-quiz-actions-bar">
        <button id="lessonQuizSubmit" type="button" class="lesson-btn primary">Submit</button>
      </div>
      <div id="lessonQuizResult" class="lesson-quiz-result"></div>
    </div>
  </aside>

  <div>
    <header class="lesson-header">
      <h1 class="lesson-title">{{ lesson.title }}</h1>
      <p class="lesson-desc">{{ lesson.description }}</p>
    </header>

    {% if lesson.youtube_video_id %}
      <div id="ytPlayerWrapper" class="yt-wrapper rr-mb-12">
        <div id="ytPlayer" class="yt-embed-fit"></div>
      </div>
    {% else %}
      <video id="lessonVideo" class="lesson-video rr-mb-12" playsinline controls preload="metadata">
        <source src="{{ lesson.video_static_path }}" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
    {% endif %}

    <p class="muted-note">Watch the video and answer the questions on the right. Submit anytime.</p>
  </div>
</section>

<script src="{% static 'resources/js/lesson_controller.js' %}" defer></script>
{% endblock %}
