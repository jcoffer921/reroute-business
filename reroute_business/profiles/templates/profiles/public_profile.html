{% extends "base.html" %}
{% load static %}

{% block title %}ReRoute | Public Profile{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/public_profile.css' %}">

<div class="public-profile" data-user="{{ viewed_user.username }}">
  <section class="profile-hero gradient-{{ gradient_key }}"></section>

  <section class="profile-content">
    <div class="profile-card">
      <div class="profile-grid">
        <aside class="profile-col profile-col--left">
          <div class="profile-identity">
            <div class="profile-avatar">
              {% if profile.profile_picture %}
                <img src="{{ profile.profile_picture.url }}" alt="{{ display_name }} avatar">
              {% else %}
                <div class="profile-avatar__initials" aria-hidden="true">
                  {% if display_first or display_last %}
                    {{ display_first|slice:':1' }}{{ display_last|slice:':1' }}
                  {% else %}
                    {{ viewed_user.username|slice:':2' }}
                  {% endif %}
                </div>
              {% endif %}
            </div>
            <h1 class="profile-name">{{ display_name }}</h1>
            {% if profile.verified %}
              <span class="hero-verified hero-verified--sm" title="Verified">Verified</span>
            {% endif %}
          </div>

          <div class="profile-section">
            <h2 class="profile-section-title">General</h2>
            <div class="profile-info">
              <div class="info-row">
                <span class="label">Phone</span>
                <span class="value">{{ profile.phone_number|default:"—" }}</span>
              </div>
              <div class="info-row">
                <span class="label">Email</span>
                <span class="value">{{ profile.personal_email|default:"—" }}</span>
              </div>
              <div class="info-row">
                <span class="label">Gender</span>
                <span class="value">{{ profile.gender|default:"—" }}</span>
              </div>
            </div>
          </div>

          <div class="profile-section">
            <h2 class="profile-section-title">Languages</h2>
            <div class="pill-row">
              {% for language in languages %}
                <span class="pill-chip">{{ language.name }}</span>
              {% empty %}
                <span class="muted">—</span>
              {% endfor %}
            </div>
          </div>
        </aside>

        <div class="profile-col profile-col--right">
          <div class="profile-section">
            <h2 class="profile-section-title">Who Am I?</h2>
            <div class="profile-body-text">
              {% if profile.bio %}
                {{ profile.bio|linebreaksbr }}
              {% else %}
                <span class="muted">This user hasn't added a bio yet.</span>
              {% endif %}
            </div>
          </div>

          <div class="profile-section">
            <h2 class="profile-section-title">Experience</h2>
            <div class="experience-list">
              {% for exp in experiences %}
                <div class="experience-item">
                  <div class="experience-header">
                    <div class="experience-title">{{ exp.job_title }}</div>
                    <div class="experience-company">{{ exp.company }}</div>
                    <div class="experience-dates">
                      {{ exp.start_date|date:"M Y" }}
                      {% if exp.end_date %}— {{ exp.end_date|date:"M Y" }}{% elif exp.currently_work_here %}— Present{% endif %}
                    </div>
                  </div>
                  {% if exp.description %}
                    <p class="experience-desc">{{ exp.description }}</p>
                  {% endif %}
                </div>
              {% empty %}
                <div class="muted">No experience added yet.</div>
              {% endfor %}
            </div>
          </div>

          <div class="profile-section">
            <h2 class="profile-section-title">Skills</h2>
            <div class="pill-row">
              {% for skill in skills %}
                <span class="pill-chip">{{ skill.name }}</span>
              {% empty %}
                <span class="muted">—</span>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}
