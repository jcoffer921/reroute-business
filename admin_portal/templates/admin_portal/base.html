{% extends "base.html" %}
{% load static admin_portal_nav %}

{% block title %}Admin Portal{% endblock %}
{% block body_class %}admin-portal{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'admin_portal/css/admin_portal.css' %}">
{% endblock %}

{% block content %}
<div class="admin-shell">
  <aside class="admin-sidebar">
    <div class="admin-sidebar-header">
      <span class="admin-sidebar-title">Operations</span>
      <span class="admin-sidebar-subtitle">ReRoute Admin</span>
    </div>
    <nav class="admin-nav">
      {% with active=request.resolver_match.url_name %}
      {% reports_flags_count as reports_flags_count %}
      <a class="admin-nav-link {% if active == 'dashboard' or active == 'dashboard_alt' %}active{% endif %}" href="{% url 'admin_portal:dashboard' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><rect x="3" y="3" width="8" height="8"/><rect x="13" y="3" width="8" height="8"/><rect x="3" y="13" width="8" height="8"/><rect x="13" y="13" width="8" height="8"/></svg>
        </span>
        Dashboard
      </a>
      <a class="admin-nav-link {% if active == 'analytics' or active == 'analytics_export' %}active{% endif %}" href="{% url 'admin_portal:analytics' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M4 19V5"/><path d="M10 19V10"/><path d="M16 19V7"/><path d="M22 19V13"/></svg>
        </span>
        Analytics
      </a>
      <a class="admin-nav-link {% if active == 'user_list' or active == 'user_detail' or active == 'user_toggle' or active == 'user_note' %}active{% endif %}" href="{% url 'admin_portal:user_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg>
        </span>
        Users
      </a>
      <a class="admin-nav-link {% if active == 'employer_list' or active == 'employer_detail' or active == 'employer_edit' or active == 'employer_notes' or active == 'employer_approve' or active == 'employer_reject' %}active{% endif %}" href="{% url 'admin_portal:employer_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><rect x="4" y="3" width="16" height="18" rx="2"/><path d="M8 7h8M8 11h8M8 15h6"/></svg>
        </span>
        Employers
      </a>
      <a class="admin-nav-link {% if active == 'job_list' or active == 'job_detail' or active == 'job_edit' or active == 'job_approve' or active == 'job_reject' %}active{% endif %}" href="{% url 'admin_portal:job_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
        </span>
        Jobs
      </a>
      <a class="admin-nav-link {% if active == 'application_list' %}active{% endif %}" href="{% url 'admin_portal:application_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><rect x="5" y="3" width="14" height="18" rx="2"/><path d="M8 7h8M8 11h8M8 15h5"/></svg>
        </span>
        Applications
      </a>
      <a class="admin-nav-link {% if active == 'org_application_list' or active == 'org_application_approve' or active == 'org_application_reject' %}active{% endif %}" href="{% url 'admin_portal:org_application_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M4 5h16v14H4z"/><path d="M8 9h8M8 13h8M8 17h4"/></svg>
        </span>
        Org Applications
      </a>
      <a class="admin-nav-link {% if active == 'org_list' or active == 'org_detail' or active == 'org_create' or active == 'org_edit' or active == 'org_delete' %}active{% endif %}" href="{% url 'admin_portal:org_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M6 21V5a2 2 0 0 1 2-2h6l4 4v14"/><path d="M14 3v4h4"/></svg>
        </span>
        Resource Organizations
      </a>
      <a class="admin-nav-link {% if active == 'content_list' or active == 'content_create' or active == 'content_edit' or active == 'content_detail' or active == 'content_delete' or active == 'content_archive' %}active{% endif %}" href="{% url 'admin_portal:content_list' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M4 4h14a2 2 0 0 1 2 2v12"/><path d="M4 6v14a2 2 0 0 0 2 2h14"/></svg>
        </span>
        Learning / Content
      </a>
      <a class="admin-nav-link" href="{% url 'admin_portal:job_list' %}?status=flagged">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M12 3l9 16H3z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
        </span>
        Reports &amp; Flags
        {% if reports_flags_count %}
          <span class="admin-badge">{{ reports_flags_count }}</span>
        {% endif %}
      </a>
      <a class="admin-nav-link {% if active == 'audit_log' or active == 'audit_log_export' %}active{% endif %}" href="{% url 'admin_portal:audit_log' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><rect x="4" y="3" width="16" height="18" rx="2"/><path d="M8 7h8M8 11h8M8 15h6"/></svg>
        </span>
        Audit Log
      </a>
      <a class="admin-nav-link" href="{% url 'settings' %}">
        <span class="nav-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a7.9 7.9 0 0 0 .1-2l2-1.2-2-3.4-2.3.5a7.7 7.7 0 0 0-1.7-1l-.3-2.4h-4l-.3 2.4a7.7 7.7 0 0 0-1.7 1l-2.3-.5-2 3.4 2 1.2a7.9 7.9 0 0 0 .1 2l-2 1.2 2 3.4 2.3-.5a7.7 7.7 0 0 0 1.7 1l.3 2.4h4l.3-2.4a7.7 7.7 0 0 0 1.7-1l2.3.5 2-3.4z"/></svg>
        </span>
        Settings
      </a>
      {% endwith %}
    </nav>
    <div class="admin-sidebar-footer">ReRoute Admin v1.0</div>
  </aside>

  <main class="admin-main">
    {% block admin_content %}{% endblock %}
  </main>
</div>

<div id="confirmModal" class="rr-modal" aria-hidden="true">
  <div class="rr-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="confirmModalTitle">
    <h3 id="confirmModalTitle">Please Confirm</h3>
    <p id="confirmModalMessage">Are you sure?</p>
    <div class="rr-modal__actions">
      <button type="button" id="confirmCancel" class="admin-btn ghost">Cancel</button>
      <button type="button" id="confirmOk" class="admin-btn primary">Confirm</button>
    </div>
  </div>
  <button type="button" class="rr-modal__backdrop" aria-label="Close"></button>
</div>

{% block extra_js %}{% endblock %}
<script src="{% static 'admin_portal/js/admin_portal.js' %}"></script>
{% endblock %}
