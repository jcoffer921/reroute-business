{% extends 'base.html' %}
{% load static %}
{% load socialaccount %}

{% block title %}ReRoute | Login{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">

<div class="login-card">
  <h1 class="auth-title">Login to your account</h1>

  {# Inline error area (server-rendered or JS can write here) #}
  {% if error %}
    <div id="form-error" class="auth-error" role="alert" aria-live="polite">{{ error }}</div>
  {% else %}
    <div id="form-error" class="auth-error" role="alert" aria-live="polite"></div>
  {% endif %}

  <form id="login-form" method="post" action="{% url 'login' %}">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ request.GET.next }}">

    <!-- ================= Email/Username ================= -->
    <div class="form-group">
      <label for="login-username">Email or username</label>
      <input
        id="login-username"
        name="username"                       {# Your view accepts email or username #}
        type="text"
        inputmode="email"
        autocomplete="username"
        placeholder="Email or username"
        required
        value="{{ prefill_identifier|default:'' }}"
      >
    </div>

    <!-- ================= Password + 'Forgot?' ================= -->
    <div class="form-group">
      <div class="label-row">
        <label for="login-password">Password</label>
        <a class="micro-link" href="{% url 'password_reset' %}">Forgot your password?</a>
      </div>
      <div class="pwd-wrap">
        <input
          id="login-password"
          name="password"
          type="password"
          autocomplete="current-password"
          placeholder="Password"
          required
        >
        <span class="pwd-toggle-text" tabindex="0" role="button" aria-controls="login-password">Show Password</span>
      </div>
    </div>

    <!-- ================= Remember device (with tooltip) ================= -->
    <div class="remember-row">
      <label class="checkbox">
        <input type="checkbox" name="remember" value="1">
        <span>Remember this device</span>
        <!-- Accessible tooltip: screen readers get title; mouse gets hover -->
        <span class="help" tabindex="0" title="Keeps you signed in on this device longer. Don't use on shared computers.">?</span>
      </label>
    </div>

    <!-- ================= Primary action ================= -->
    <button id="signin-btn" type="submit" class="btn-pill">Sign in</button>

    <!-- ================= Secondary actions ================= -->
    <div class="secondary-actions">
      <span>Don't have an account? <a class="link" href="{% url 'signup' %}">Register</a>.</span>
      <span class="sep" aria-hidden="true">·</span>
      <!-- ✅ Best place for Employer Login: with other secondary links -->
      <a class="link" href="{% url 'employer_login' %}">Employer Login</a>
      <span class="sep" aria-hidden="true">·</span>
      <a class="link" href="{% url 'resend_verification' %}">Resend verification</a>
    </div>

    <!-- Optional: AJAX error slot if you submit via JS -->
    <p id="login-error" class="error-text" aria-live="polite"></p>
  </form>
</div>

<script src="{% static 'js/base.js' %}"></script>
<script src="{% static 'js/login.js' %}"></script>
{% endblock %}
