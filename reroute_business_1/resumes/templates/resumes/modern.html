<!doctype html>
<html lang="en">
  {% load resume_filters %}
  <head>
    <title>Resume</title>
    <style>
      @page { margin: 24px; }
      body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#111;}
      .container{max-width:800px;margin:0 auto;padding:24px;}
      h1{font-size:24px;margin:0 0 4px;}
      h2{font-size:14px;margin:0 0 16px;color:#555;font-weight:600;}
      h3{font-size:13px; letter-spacing: .04em; text-transform: uppercase; margin:18px 0 6px; border-left: 4px solid #111; padding-left: 8px;}
      ul{margin:6px 0 10px 18px;}
      /* modern: uppercase headings, accent line */
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>{{ resume.full_name|default:resume.user.get_full_name|default:resume.user.username }}</h1>
        <h2>{{ resume.user.email }}</h2>
        {% with ci=resume.contact_info %}
          {% if ci %}
            {% if ci.phone or ci.city or ci.state %}
              <p class="muted">
                {% if ci.phone %}{{ ci.phone }}{% endif %}
                {% if ci.city or ci.state %}
                  {% if ci.phone %} — {% endif %}
                  {{ ci.city }}{% if ci.city and ci.state %}, {% endif %}{{ ci.state }}
                {% endif %}
              </p>
            {% endif %}
          {% endif %}
        {% endwith %}
      </header>

      {% if resume.summary %}
        <p>{{ resume.summary }}</p>
      {% endif %}

      {% if resume.experiences.all or resume.experience_entries.all %}
        <h3>Experience</h3>
        {% with entries=resume.experiences.all %}
          {% if entries %}
            {% for e in entries %}
              <p>
                <strong>{{ e.job_title }}</strong>, {{ e.company }}
                {% if e.currently_work_here %}
                  ({{ e.start_date|date:"b Y" }} – Present)
                {% elif e.end_date %}
                  ({{ e.start_date|date:"b Y" }} – {{ e.end_date|date:"b Y" }})
                {% endif %}
              </p>
              {% if e.description %}
                <ul>
                  {% for line in e.description.splitlines %}
                    {% if line %}<li>{{ line|strip_bullet }}</li>{% endif %}
                  {% endfor %}
                </ul>
              {% endif %}
            {% endfor %}
          {% else %}
            {% for e in resume.experience_entries.all %}
              <p><strong>{{ e.job_title }}</strong>, {{ e.company }} {% if e.dates %}({{ e.dates }}){% endif %}</p>
            {% endfor %}
          {% endif %}
        {% endwith %}
      {% endif %}

      {% if resume.education.all or resume.education_entries.all %}
        <h3>Education</h3>
        {% with edus=resume.education.all %}
          {% if edus %}
            {% for ed in edus %}
              <p>
                <strong>{{ ed.degree|default:"Education/Training" }}</strong> — {{ ed.school }}
              </p>
            {% endfor %}
          {% else %}
            {% for ed in resume.education_entries.all %}
              <p>
                <strong>{{ ed.degree|default:"Education/Training" }}</strong> — {{ ed.school_name }} {% if ed.graduation_year %}({{ ed.graduation_year }}){% endif %}
              </p>
            {% endfor %}
          {% endif %}
        {% endwith %}
      {% endif %}

      {% with skills=resume.skills.all %}
        {% if skills %}
          <h3>Skills</h3>
          <p>{% for s in skills %}{{ s.name|title }}{% if not forloop.last %} · {% endif %}{% endfor %}</p>
        {% endif %}
      {% endwith %}

      {% if resume.certifications %}
        <h3>Certifications</h3>
        <ul>
          {% for cert in resume.certifications.splitlines %}
            {% if cert %}<li>{{ cert }}</li>{% endif %}
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </body>
  </html>
